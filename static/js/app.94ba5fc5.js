(function(e){function t(t){for(var n,o,s=t[0],c=t[1],u=t[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[r("b-navbar-brand",[e._v("Отчеты системы регистрации прихода/ухода")]),r("b-navbar-nav",[e._v("Отчет об ошибках")])],1),r("b-container",[r("report")],1)],1)},i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",{attrs:{fluid:""}},[r("b-row",[r("b-col",[r("h1",{staticClass:"text-center mt-2"},[e._v("Отчет об ошибках")])])],1),r("b-row",[r("b-col",[r("b-form",{attrs:{inline:""}},[r("label",{attrs:{for:"date-from"}},[e._v("Дата с")]),r("b-form-datepicker",{staticClass:"ml-2",attrs:{id:"date-from"},model:{value:e.date_from,callback:function(t){e.date_from=t},expression:"date_from"}}),r("label",{staticClass:"ml-2",attrs:{for:"date-to"}},[e._v("Дата до")]),r("b-form-datepicker",{staticClass:"ml-2",attrs:{id:"date-to"},model:{value:e.date_to,callback:function(t){e.date_to=t},expression:"date_to"}}),r("b-button",{staticClass:"ml-2",attrs:{variant:"primary"},on:{click:e.load_data}},[e._v("Сформировать ")])],1)],1)],1),r("b-row",{staticClass:"mt-2"},[r("b-col",[r("b-form",{attrs:{inline:""}},[r("label",{attrs:{for:"filter-error-type"}},[e._v("Тип ошибки")]),r("b-form-select",{staticClass:"ml-3",attrs:{options:e.filter_options,id:"filter-error-type"},model:{value:e.error_type_filter,callback:function(t){e.error_type_filter=t},expression:"error_type_filter"}})],1)],1)],1),r("b-row",[r("b-col",[r("b-alert",{attrs:{variant:"danger",dismissible:"",fade:"",show:e.is_error},on:{dismissed:function(t){e.is_error=!1}}},[e._v("Ошибка загрузки данных: "+e._s(e.error_text))])],1)],1),r("b-row",[r("b-col",[r("b-table",{staticClass:"mt-3",attrs:{items:e.items,busy:e.isBusy,fields:e.table_fields,outlined:""},scopedSlots:e._u([{key:"table-busy",fn:function(){return[r("div",{staticClass:"text-center text-danger my-2"},[r("b-spinner",{staticClass:"align-middle"}),e._v("Loading...")],1)]},proxy:!0},{key:"cell(current_image)",fn:function(t){return[r("b-img",e._b({attrs:{src:e.format_current_image_url(t.item),fluid:""}},"b-img",e.image_props,!1))]}},{key:"cell(new_image)",fn:function(t){return[t.item.recognized_users?r("div",[r("b-img",e._b({attrs:{src:"/images/"+t.item.recognized_users[0]}},"b-img",e.image_props,!1))],1):e._e()]}},{key:"cell(face_distance)",fn:function(t){return[t.item.recognized_users?r("distance",{attrs:{first_user_id:t.item.user_id,second_user_id:t.item.recognized_users[0]}}):e._e()]}}])})],1)],1)],1)},s=[],c=(r("99af"),r("4de4"),r("d3b7"),r("96cf"),r("1da1")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("strong",[e._v(e._s(e.distance))])},l=[],d={name:"distance",props:["first_user_id","second_user_id"],data:function(){return{distance:0}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/distance?first_id=".concat(e.first_user_id,"&second_id=").concat(e.second_user_id));case 3:return r=t.sent,t.next=6,r.json();case 6:n=t.sent,e.distance=n.data.distance,t.next=13;break;case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",e.distance="error");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},f=d,_=r("2877"),p=Object(_["a"])(f,u,l,!1,null,null,null),b=p.exports,m={name:"RequestPicture",components:{distance:b},data:function(){return{isBusy:!1,date_from:"",date_to:"",error_type_filter:"",loaded_data:[],is_error:!1,error_text:"",filter_options:[{value:"",text:"Все ошибки"},{value:"not_me",text:"Не верное определение лица"},{value:"not_recognized",text:"Лицо не расспознано"},{value:"no_face",text:"Лицо не найдено"},{value:"user_not_found",text:"Пользователь не найден"}],table_fields:[{key:"recognize_time",label:"Дата и время операции"},{key:"error_type",label:"Тип ошибки"},{key:"current_image",label:"Текущее изображение"},{key:"new_image",label:"Совпавшее лицо"},{key:"face_distance",label:"Расстояние"}],image_props:{width:120,height:120,class:"m1"}}},methods:{format_current_image_url:function(e){return"not_me"===e.error_type?"/images/".concat(e.user_id):"/imagesrequest/".concat(e.record_id)},load_data:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isBusy=!0,t.prev=1,t.next=4,fetch("/api/badrequest?start=".concat(e.date_from,"&end=").concat(e.date_to));case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,a=n.data,e.loaded_data=a,e.isBusy=!1,t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](1),e.error_text=t.t0,e.is_error=!0,e.isBusy=!1;case 18:case"end":return t.stop()}}),t,null,[[1,13]])})))()},get_distance:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch("/api/distance?first_id=".concat(e,"&second_id=").concat(t));case 3:return n=r.sent,r.next=6,n.json();case 6:return a=r.sent,r.abrupt("return",a.data.distance);case 10:return r.prev=10,r.t0=r["catch"](0),r.abrupt("return","ERROR");case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}},computed:{items:function(){var e=this;return""===this.error_type_filter?this.loaded_data:this.loaded_data.filter((function(t){return t.error_type===e.error_type_filter}))}}},v=m,g=Object(_["a"])(v,o,s,!1,null,null,null),y=g.exports,h={name:"App",components:{report:y}},x=h,w=Object(_["a"])(x,a,i,!1,null,null,null),k=w.exports,j=(r("f9e3"),r("2dd8"),r("5f5b")),O=r("b1e0");n["default"].config.productionTip=!1,n["default"].use(j["a"]),n["default"].use(O["a"]),new n["default"]({render:function(e){return e(k)}}).$mount("#app")}});
//# sourceMappingURL=app.94ba5fc5.js.map